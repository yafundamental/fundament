>> является частью [[Базы данных|баз данных]]

Механизм оптимизации SQL-запросов. Индексы позволяют СУБД быстро определить положенние интересующих нас данных в БД

### Основные сведения
---
- можно думать о индексах как о кижном содержании: не нужно перелистывать все страницы книги, чтобы найти нужную главу, а можно просто найти нужную страницу в содержании
- индексация позволяет с помощью индекса быстрее найти в БД данные по запросу
- синтаксис создания:
	`CREATE INDEX some_index ON table_name (column_1, column_2, ...)`
- синтаксис удаления:
	`DROP INDEX some_index`
- в запросе база данных сначала выделяет проиндексированные столбцы, на их основе делает выборку, после в уже сильно уменьшенном скоупе выборки учитывает непроиндексированные столбцы

### Типы индексов
---
##### BINARY TREE INDEX
- cамый распространённый тип индексов
- может использоваться с большинством типов данных
- подходит для всех старндартных операций сравнения (>, <, >=, <=, =, <>)
- `CREATE INDEX some_index ON table_name (column_1, column_2, ...)`

Основан на идее разделения данных на несколько секций, которые называются узлами дерева. Каждый узел содержит набор ключей и ссылок на дочерние узлы. Поиск в данном случае аналогичен поиску в бинарном дереве.

##### HASH INDEX
- предназначены для обеспечения быстрого доступа к данным по равенству
- `CREATE INDEX some_index ON table_name USING hash (column_1, column_2, ...)`

Этот тип индекса отображает тип данных на хеш при помощи hash-функции, а сами данные представлены в виде hash-таблицы. Использует hash-функцию и hash-таблицу для поиска элементов при выполнении запросов.

##### GIN INDEX
- применяется для полнотекстового поиска
- `CREATE INDEX some_index ON table_name USING gin (column_1, column_2, ...)`

Каждой лексеме сопоставляется BINARY TREE список идентификаторов документов, в которых эта самая лексема встречается.

### Процесс работы
---
1. база данных анализирует все возможные пути запроса, выбирая самый оптимальный из них
2. каждый возможный путь называется **планом выполнения запроса**. План выполнения запроса -- это последовательность операций для получени результата SQL-запроса
3. сущность, определяющая наиболее эффективный способ выполнения запроса с учётом анализа всех возможных планов выполнения запроса называется **оптимизатором запросов**

### Когда применять индексацию
---
Важно помнить, что
- индексам необходимо место на жёстком диске
- при добавлении данных в БД сначала обновляется исходная таблица, а затем все её индексы
Поэтому
- лучше использовать индексы для БД в хранилищах данных, получающих плановые обновления, а не для тех, которые постоянно обновляются (потому что при каждом обновлении у нас будут пересоздаваться индексы, которые не будут переиспользоваться опять же из-за постоянных обновлений БД и постоянного пересоздания новых индексов, которые опять же не будут использоваться..., поэтому индексы станут бесполезны)

### Когда НЕ применять индексацию
---
1. В небольших таблицах
2. В таблицах, где часто обновляются данные (UPDATE | INSERT)
3. Индексы не должны использоваться для столбцов, содержащих большое количество значений NULL

### Типы индексов
---
##### Кластеризованные
Это такой особый индекс, который использует первичный ключ для структуризации данных в таблице. Он не требует явного объявления и создаётся по умолчанию при создании PRIMARY KEY.
##### Некластеризованные
Существует, чтобы применить преимущества индексации к "не PRIMARY KEY" столбцам. Такие индексы требуют явного определения.
